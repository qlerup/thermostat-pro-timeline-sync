set_store:
  name: Set full store
  description: Replace the entire schedules store and bump version.
  fields:
    schedules:
      name: Schedules
      description: Object mapping entity_id -> {defaultTemp, blocks:[...]}. When provided, it is split automatically into the main and weekday sections.
      required: false
      example: >
        {"climate.kitchen":{"defaultTemp":20,"blocks":[{"from":"06:00","to":"08:00","temp":21}]}}
      selector:
        object: {}
    schedules_main:
      name: Schedules (main)
      description: Optional direct payload for the main schedules section (defaultTemp, blocks, profiles, presence, holiday).
      required: false
      selector:
        object: {}
    schedules_weekday:
      name: Schedules (weekday)
      description: Optional direct payload for weekday data (weekly, weekly_modes).
      required: false
      selector:
        object: {}
    settings:
      name: Settings (optional)
      description: Extra shared settings used by UI and background auto-apply.
      required: false
      example: >
        {"min_temp":5,"max_temp":25,"away":{"enabled":true,"persons":["person.me"],"target_c":17},"merges":{"climate.living":["climate.living_2"]},"auto_apply_enabled":true}
      selector:
        object: {}
    colors:
      name: Colors (optional)
      description: Color ranges and color_global flag stored in the dedicated color sensor. When omitted, values extracted from the settings payload are reused.
      required: false
      example: >
        {"color_ranges":{"*":[{"from":18,"to":22,"color":"#ff6600"}]},"color_global":true}
      selector:
        object: {}
    force:
      name: Force save
      description: Force a save and version bump even if data is unchanged.
      required: false
      selector:
        boolean: {}

patch_entity:
  name: Patch single entity
  description: Merge given data into one entity and bump version.
  fields:
    entity_id:
      name: Entity
      description: The climate entity id to patch.
      required: true
      example: climate.kitchen
      selector:
        entity:
          domain: climate
    data:
      name: Data
      description: Fields to merge (e.g., defaultTemp, blocks).
      required: true
      example: >
        {"defaultTemp":21,"blocks":[{"from":"17:00","to":"22:00","temp":22}]}
      selector:
        object: {}

clear:
  name: Clear store
  description: Clear all schedules and bump version.

backup_now:
  name: Backup now
  description: Create a backup of schedules/settings. Supports selecting sections.
  fields:
    main:
      name: Main schedules
      description: Include base daily schedules (defaultTemp, blocks, profiles).
      required: false
      default: true
      selector:
        boolean: {}
    weekday:
      name: Weekday schedules
      description: Include weekday schedules (weekly, weekly_modes).
      required: false
      default: true
      selector:
        boolean: {}
    presence:
      name: Presence schedules
      description: Include presence schedules (advanced away per room).
      required: false
      default: true
      selector:
        boolean: {}
    settings:
      name: Editor settings
      description: Include editor/global settings (excluding colors).
      required: false
      default: true
      selector:
        boolean: {}
    holiday:
      name: Holiday schedules
      description: Include holiday schedules per room.
      required: false
      default: true
      selector:
        boolean: {}
    colors:
      name: Color blocks
      description: Include color ranges and color mode.
      required: false
      default: true
      selector:
        boolean: {}

restore_now:
  name: Restore now
  description: Restore from backup. Can merge only selected sections.
  fields:
    mode:
      name: Mode
      description: Use 'merge' to merge selected sections, or 'replace' to fully overwrite.
      required: false
      example: merge
      selector:
        select:
          options:
            - merge
            - replace
          mode: dropdown
    main:
      name: Main schedules
      description: Restore base daily schedules (defaultTemp, blocks, profiles).
      required: false
      selector:
        boolean: {}
    weekday:
      name: Weekday schedules
      description: Restore weekday schedules (weekly, weekly_modes).
      required: false
      selector:
        boolean: {}
    presence:
      name: Presence schedules
      description: Restore presence schedules.
      required: false
      selector:
        boolean: {}
    settings:
      name: Editor settings
      description: Restore editor/global settings (excluding colors).
      required: false
      selector:
        boolean: {}
    holiday:
      name: Holiday schedules
      description: Restore holiday schedules per room.
      required: false
      selector:
        boolean: {}
    colors:
      name: Color blocks
      description: Restore color ranges and color mode.
      required: false
      selector:
        boolean: {}

